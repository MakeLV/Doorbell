#include "pitches.h"
//#include "Tone.h"
#include "avr/pgmspace.h"

#define OCTAVE_OFFSET 0

int spkr = 2;
int btn = 4;
int cut_btn = 3;
int key;

typedef enum btn_state {
    NOT_PRESSED,
    PRESSED,
    FULLY_ON
} btn_state_t;

//PROGMEM prog_char song_0[] = "Indiana:d=4,o=5,b=250:e,8p,8f,8g,8p,1c6,8p.,d,8p,8e,1f,p.,g,8p,8a,8b,8p,1f6,p,a,8p,8b,2c6,2d6,2e6,e,8p,8f,8g,8p,1c6,p,d6,8p,8e6,1f.6,g,8p,8g,e.6,8p,d6,8p,8g,e.6,8p,d6,8p,8g,f.6,8p,e6,8p,8d6,2c6";
PROGMEM prog_int16_t song_0[] = { 659, 240, 0, 120, 698, 120, 784, 120, 0, 120, 1047, 960, 0, 180, 587, 240, 0, 120, 659, 120, 698, 960, 0, 360, 784, 240, 0, 120, 880, 120, 988, 120, 0, 120, 1397, 960, 0, 240, 880, 240, 0, 120, 988, 120, 1047, 480, 1175, 480, 1319, 480, 659, 240, 0, 120, 698, 120, 784, 120, 0, 120, 1047, 960, 0, 240, 1175, 240, 0, 120, 1319, 120, 1397, 1440, 784, 240, 0, 120, 784, 120, 1319, 360, 0, 120, 1175, 240, 0, 120, 784, 120, 1319, 360, 0, 120, 1175, 240, 0, 120, 784, 120, 1397, 360, 0, 120, 1319, 240, 0, 120, 1175, 120, 1047, 480, -1 };
//PROGMEM prog_char song_1[] = "Xfiles:d=4,o=5,b=125:e,b,a,b,d6,2b.,1p,e,b,a,b,e6,2b.,1p,g6,f#6,e6,d6,e6,2b.,1p,g6,f#6,e6,d6,f#6,2b.,1p,e,b,a,b,d6,2b.,1p,e,b,a,b,e6,2b.,1p,e6,2b.";
PROGMEM prog_int16_t song_1[] = { 659, 480, 988, 480, 880, 480, 988, 480, 1175, 480, 988, 1440, 0, 1920, 659, 480, 988, 480, 880, 480, 988, 480, 1319, 480, 988, 1440, 0, 1920, 1568, 480, 1480, 480, 1319, 480, 1175, 480, 1319, 480, 988, 1440, 0, 1920, 1568, 480, 1480, 480, 1319, 480, 1175, 480, 1480, 480, 988, 1440, 0, 1920, 659, 480, 988, 480, 880, 480, 988, 480, 1175, 480, 988, 1440, 0, 1920, 659, 480, 988, 480, 880, 480, 988, 480, 1319, 480, 988, 1440, 0, 1920, 1319, 480, 988, 1440, -1 };
//PROGMEM prog_char song_2[] = "StarWars:d=4,o=5,b=45:32p,32f#,32f#,32f#,8b.,8f#.6,32e6,32d#6,32c#6,8b.6,16f#.6,32e6,32d#6,32c#6,8b.6,16f#.6,32e6,32d#6,32e6,8c#.6,32f#,32f#,32f#,8b.,8f#.6,32e6,32d#6,32c#6,8b.6,16f#.6,32e6,32d#6,32c#6,8b.6,16f#.6,32e6,32d#6,32e6,8c#6";
PROGMEM prog_int16_t song_2[] = { 0, 166, 740, 166, 740, 166, 740, 166, 988, 999, 1480, 999, 1319, 166, 1245, 166, 1109, 166, 1976, 999, 1480, 499, 1319, 166, 1245, 166, 1109, 166, 1976, 999, 1480, 499, 1319, 166, 1245, 166, 1319, 166, 1109, 999, 740, 166, 740, 166, 740, 166, 988, 999, 1480, 999, 1319, 166, 1245, 166, 1109, 166, 1976, 999, 1480, 499, 1319, 166, 1245, 166, 1109, 166, 1976, 999, 1480, 499, 1319, 166, 1245, 166, 1319, 166, 1109, 666, -1 };
//PROGMEM prog_char song_3[] = "A-Team:d=8,o=5,b=125:4d#6,a#,2d#6,16p,g#,4a#,4d#.,p,16g,16a#,d#6,a#,f6,2d#6,16p,c#.6,16c6,16a#,g#.,2a#";
PROGMEM prog_int16_t song_3[] = { 1245, 480, 932, 240, 1245, 960, 0, 120, 831, 240, 932, 480, 622, 720, 0, 240, 784, 120, 932, 120, 1245, 240, 932, 240, 1397, 240, 1245, 960, 0, 120, 1109, 360, 1047, 120, 932, 120, 831, 360, 932, 960, -1 };
//PROGMEM prog_char song_4[] = "smb_under:d=4,o=6,b=100:32c,32p,32c7,32p,32a5,32p,32a,32p,32a#5,32p,32a#,2p,32c,32p,32c7,32p,32a5,32p,32a,32p,32a#5,32p,32a#,2p,32f5,32p,32f,32p,32d5,32p,32d,32p,32d#5,32p,32d#,2p,32f5,32p,32f,32p,32d5,32p,32d,32p,32d#5,32p,32d#";
PROGMEM prog_int16_t song_4[] = { 1047, 75, 0, 75, 2093, 75, 0, 75, 880, 75, 0, 75, 1760, 75, 0, 75, 932, 75, 0, 75, 1865, 75, 0, 1200, 1047, 75, 0, 75, 2093, 75, 0, 75, 880, 75, 0, 75, 1760, 75, 0, 75, 932, 75, 0, 75, 1865, 75, 0, 1200, 698, 75, 0, 75, 1397, 75, 0, 75, 587, 75, 0, 75, 1175, 75, 0, 75, 622, 75, 0, 75, 1245, 75, 0, 1200, 698, 75, 0, 75, 1397, 75, 0, 75, 587, 75, 0, 75, 1175, 75, 0, 75, 622, 75, 0, 75, 1245, 75, -1 };
//PROGMEM prog_char song_5[] = "smbdeath:d=4,o=5,b=90:32c6,32c6,32c6,8p,16b,16f6,16p,16f6,16f.6,16e.6,16d6,16c6,16p,16e,16p,16c";
PROGMEM prog_int16_t song_5[] = { 1047, 83, 1047, 83, 1047, 83, 0, 333, 988, 166, 1397, 166, 0, 166, 1397, 166, 1397, 249, 1319, 249, 1175, 166, 1047, 166, 0, 166, 659, 166, 0, 166, 523, 166, -1 };
//PROGMEM prog_char song_6[] = "smb:d=4,o=5,b=100:16e6,16e6,32p,8e6,16c6,8e6,8g6,8p,8g,8p,8c6,16p,8g,16p,8e,16p,8a,8b,16a#,8a,16g.,16e6,16g6,8a6,16f6,8g6,8e6,16c6,16d6,8b,16p,8c6,16p,8g,16p,8e,16p,8a,8b,16a#,8a,16g.,16e6,16g6,8a6,16f6,8g6,8e6,16c6,16d6,8b,8p,16g6,16f#6,16f6,16d#6,16p,16e6,16p,16g#,16a,16c6,16p,16a,16c6,16d6,8p,16g6,16f#6,16f6,16d#6,16p,16e6,16p,16c7,16p,16c7,16c7,p,16g6,16f#6,16f6,16d#6,16p,16e6,16p,16g#,16a,16c6,16p,16a,16c6,16d6,8p,16d#6,8p,16d6,8p,16c6";
PROGMEM prog_int16_t song_6[] = { 1319, 150, 1319, 150, 0, 75, 1319, 300, 1047, 150, 1319, 300, 1568, 300, 0, 300, 784, 300, 0, 300, 1047, 300, 0, 150, 784, 300, 0, 150, 659, 300, 0, 150, 880, 300, 988, 300, 932, 150, 880, 300, 784, 225, 1319, 150, 1568, 150, 1760, 300, 1397, 150, 1568, 300, 1319, 300, 1047, 150, 1175, 150, 988, 300, 0, 150, 1047, 300, 0, 150, 784, 300, 0, 150, 659, 300, 0, 150, 880, 300, 988, 300, 932, 150, 880, 300, 784, 225, 1319, 150, 1568, 150, 1760, 300, 1397, 150, 1568, 300, 1319, 300, 1047, 150, 1175, 150, 988, 300, 0, 300, 1568, 150, 1480, 150, 1397, 150, 1245, 150, 0, 150, 1319, 150, 0, 150, 831, 150, 880, 150, 1047, 150, 0, 150, 880, 150, 1047, 150, 1175, 150, 0, 300, 1568, 150, 1480, 150, 1397, 150, 1245, 150, 0, 150, 1319, 150, 0, 150, 2093, 150, 0, 150, 2093, 150, 2093, 150, 0, 600, 1568, 150, 1480, 150, 1397, 150, 1245, 150, 0, 150, 1319, 150, 0, 150, 831, 150, 880, 150, 1047, 150, 0, 150, 880, 150, 1047, 150, 1175, 150, 0, 300, 1245, 150, 0, 300, 1175, 150, 0, 300, 1047, 150, -1 };
//PROGMEM prog_char song_7[] = "Zelda1:d=4,o=5,b=125:a#,f.,8a#,16a#,16c6,16d6,16d#6,2f6,8p,8f6,16f.6,16f#6,16g#.6,2a#.6,16a#.6,16g#6,16f#.6,8g#.6,16f#.6,2f6,f6,8d#6,16d#6,16f6,2f#6,8f6,8d#6,8c#6,16c#6,16d#6,2f6,8d#6,8c#6,8c6,16c6,16d6,2e6,g6,8f6,16f,16f,8f,16f,16f,8f,16f,16f,8f,8f,a#,f.,8a#,16a#,16c6,16d6,16d#6,2f6,8p,8f6,16f.6,16f#6,16g#.6,2a#.6,c#7,c7,2a6,f6,2f#.6,a#6,a6,2f6,f6,2f#.6,a#6,a6,2f6,d6,2d#.6,f#6,f6,2c#6,a#,c6,16d6,2e6,g6,8f6,16f,16f,8f,16f,16f,8f,16f,16f,8f,8f";
PROGMEM prog_int16_t song_7[] = { 932, 480, 698, 720, 932, 240, 932, 120, 1047, 120, 1175, 120, 1245, 120, 1397, 960, 0, 240, 1397, 240, 1397, 180, 1480, 120, 1661, 180, 1865, 1440, 1865, 180, 1661, 120, 1480, 180, 1661, 360, 1480, 180, 1397, 960, 1397, 480, 1245, 240, 1245, 120, 1397, 120, 1480, 960, 1397, 240, 1245, 240, 1109, 240, 1109, 120, 1245, 120, 1397, 960, 1245, 240, 1109, 240, 1047, 240, 1047, 120, 1175, 120, 1319, 960, 1568, 480, 1397, 240, 698, 120, 698, 120, 698, 240, 698, 120, 698, 120, 698, 240, 698, 120, 698, 120, 698, 240, 698, 240, 932, 480, 698, 720, 932, 240, 932, 120, 1047, 120, 1175, 120, 1245, 120, 1397, 960, 0, 240, 1397, 240, 1397, 180, 1480, 120, 1661, 180, 1865, 1440, 2217, 480, 2093, 480, 1760, 960, 1397, 480, 1480, 1440, 1865, 480, 1760, 480, 1397, 960, 1397, 480, 1480, 1440, 1865, 480, 1760, 480, 1397, 960, 1175, 480, 1245, 1440, 1480, 480, 1397, 480, 1109, 960, 932, 480, 1047, 480, 1175, 120, 1319, 960, 1568, 480, 1397, 240, 698, 120, 698, 120, 698, 240, 698, 120, 698, 120, 698, 240, 698, 120, 698, 120, 698, 240, 698, 240, -1 };
//PROGMEM prog_char song_8[] = "smario2:d=4,o=5,b=125:8g,16c,8e,8g.,16c,8e,16g,16c,16e,16g,8b,a,8p,16c,8g,16c,8e,8g.,16c,8e,16g,16c#,16e,16g,8b,a,8p,16b,8c6,16b,8c6,8a.,16c6,8b,16a,8g,16f#,8g,8e.,16c,8d,16e,8f,16e,8f,8b.4,16e,8d.,c";
PROGMEM prog_int16_t song_8[] = { 784, 240, 523, 120, 659, 240, 784, 360, 523, 120, 659, 240, 784, 120, 523, 120, 659, 120, 784, 120, 988, 240, 880, 480, 0, 240, 523, 120, 784, 240, 523, 120, 659, 240, 784, 360, 523, 120, 659, 240, 784, 120, 554, 120, 659, 120, 784, 120, 988, 240, 880, 480, 0, 240, 988, 120, 1047, 240, 988, 120, 1047, 240, 880, 360, 1047, 120, 988, 240, 880, 120, 784, 240, 740, 120, 784, 240, 659, 360, 523, 120, 587, 240, 659, 120, 698, 240, 659, 120, 698, 240, 494, 360, 659, 120, 587, 360, 523, 480, -1 };
//PROGMEM prog_char song_9[] = "smb3lvl1:d=4,o=5,b=80:16g,32c,16g.,16a,32c,16a.,16b,32c,16b,16a.,32g#,16a.,16g,32c,16g.,16a,32c,16a,4b.,32p,16c6,32f,16c.6,16d6,32f,16d.6,16e6,32f,16e6,16d.6,32c#6,16d.6,16c6,32f,16c.6,16d6,32f,16d6,4e.6,32p,16g,32c,16g.,16a,32c,16a.,16b,32c,16b,16a.,32g#,16a.,16c6,8c.6,32p,16c6,4c.6";
PROGMEM prog_int16_t song_9[] = { 784, 187, 523, 93, 784, 280, 880, 187, 523, 93, 880, 280, 988, 187, 523, 93, 988, 187, 880, 280, 831, 93, 880, 280, 784, 187, 523, 93, 784, 280, 880, 187, 523, 93, 880, 187, 988, 1125, 0, 93, 1047, 187, 698, 93, 1047, 280, 1175, 187, 698, 93, 1175, 280, 1319, 187, 698, 93, 1319, 187, 1175, 280, 1109, 93, 1175, 280, 1047, 187, 698, 93, 1047, 280, 1175, 187, 698, 93, 1175, 187, 1319, 1125, 0, 93, 784, 187, 523, 93, 784, 280, 880, 187, 523, 93, 880, 280, 988, 187, 523, 93, 988, 187, 880, 280, 831, 93, 880, 280, 1047, 187, 1047, 562, 0, 93, 1047, 187, 1047, 1125, -1 };
//PROGMEM prog_char song_10[] = "Monty P:d=4,o=5,b=200:f6,8e6,d6,8c#6,c6,8b,a#,8a,8g,8a,8a#,a,8g,2c6,8p,8c6,8a,8p,8a,8a,8g#,8a,8f6,8p,8c6,8c6,8p,8a,8a#,8p,8a#,8a#,8p,8c6,2d6,8p,8a#,8g,8p,8g,8g,8f#,8g,8e6,8p,8d6,8d6,8p,8a#,8a,8p,8a,8a,8p,8a#,2c6,8p,8c6";
PROGMEM prog_int16_t song_10[] = { 1397, 300, 1319, 150, 1175, 300, 1109, 150, 1047, 300, 988, 150, 932, 300, 880, 150, 784, 150, 880, 150, 932, 150, 880, 300, 784, 150, 1047, 600, 0, 150, 1047, 150, 880, 150, 0, 150, 880, 150, 880, 150, 831, 150, 880, 150, 1397, 150, 0, 150, 1047, 150, 1047, 150, 0, 150, 880, 150, 932, 150, 0, 150, 932, 150, 932, 150, 0, 150, 1047, 150, 1175, 600, 0, 150, 932, 150, 784, 150, 0, 150, 784, 150, 784, 150, 740, 150, 784, 150, 1319, 150, 0, 150, 1175, 150, 1175, 150, 0, 150, 932, 150, 880, 150, 0, 150, 880, 150, 880, 150, 0, 150, 932, 150, 1047, 600, 0, 150, 1047, 150, -1 };
//PROGMEM prog_char song_11[] = "smwwd1:d=4,o=5,b=125:a,8f.,16c,16d,16f,16p,f,16d,16c,16p,16f,16p,16f,16p,8c6,8a.,g,16c,a,8f.,16c,16d,16f,16p,f,16d,16c,16p,16f,16p,16a#,16a,16g,2f,16p,8a.,8f.,8c,8a.,f,16g#,16f,16c,16p,8g#.,2g,8a.,8f.,8c,8a.,f,16g#,16f,8c,2c6";
PROGMEM prog_int16_t song_11[] = { 880, 480, 698, 360, 523, 120, 587, 120, 698, 120, 0, 120, 698, 480, 587, 120, 523, 120, 0, 120, 698, 120, 0, 120, 698, 120, 0, 120, 1047, 240, 880, 360, 784, 480, 523, 120, 880, 480, 698, 360, 523, 120, 587, 120, 698, 120, 0, 120, 698, 480, 587, 120, 523, 120, 0, 120, 698, 120, 0, 120, 932, 120, 880, 120, 784, 120, 698, 960, 0, 120, 880, 360, 698, 360, 523, 240, 880, 360, 698, 480, 831, 120, 698, 120, 523, 120, 0, 120, 831, 360, 784, 960, 880, 360, 698, 360, 523, 240, 880, 360, 698, 480, 831, 120, 698, 120, 523, 240, 1047, 960, -1 };
//PROGMEM prog_char song_12[] = "SWEnd:d=4,o=5,b=225:2c,1f,2g.,8g#,8a#,1g#,2c.,c,2f.,g,g#,c,8g#.,8c.,8c6,1a#.,2c,2f.,g,g#.,8f,c.6,8g#,1f6,2f,8g#.,8g.,8f,2c6,8c.6,8g#.,8f,2c,8c.,8c.,8c,2f,8f.,8f.,8f,2f";
PROGMEM prog_int16_t song_12[] = { 523, 532, 698, 1064, 784, 798, 831, 133, 932, 133, 831, 1064, 523, 798, 523, 266, 698, 798, 784, 266, 831, 266, 523, 266, 831, 199, 523, 199, 1047, 133, 932, 1596, 523, 532, 698, 798, 784, 266, 831, 399, 698, 133, 1047, 399, 831, 133, 1397, 1064, 698, 532, 831, 199, 784, 199, 698, 133, 1047, 532, 1047, 199, 831, 199, 698, 133, 523, 532, 523, 199, 523, 199, 523, 133, 698, 532, 698, 199, 698, 199, 698, 133, 698, 532, -1 };
//PROGMEM prog_char song_13[] = "Cantina:d=4,o=5,b=250:8a,8p,8d6,8p,8a,8p,8d6,8p,8a,8d6,8p,8a,8p,8g#,a,8a,8g#,8a,g,8f#,8g,8f#,f.,8d.,16p,p.,8a,8p,8d6,8p,8a,8p,8d6,8p,8a,8d6,8p,8a,8p,8g#,8a,8p,8g,8p,g.,8f#,8g,8p,8c6,a#,a,g";
PROGMEM prog_int16_t song_13[] = { 880, 120, 0, 120, 1175, 120, 0, 120, 880, 120, 0, 120, 1175, 120, 0, 120, 880, 120, 1175, 120, 0, 120, 880, 120, 0, 120, 831, 120, 880, 240, 880, 120, 831, 120, 880, 120, 784, 240, 740, 120, 784, 120, 740, 120, 698, 360, 587, 180, 0, 60, 0, 360, 880, 120, 0, 120, 1175, 120, 0, 120, 880, 120, 0, 120, 1175, 120, 0, 120, 880, 120, 1175, 120, 0, 120, 880, 120, 0, 120, 831, 120, 880, 120, 0, 120, 784, 120, 0, 120, 784, 360, 740, 120, 784, 120, 0, 120, 1047, 120, 932, 240, 880, 240, 784, 240, -1 };
//PROGMEM prog_char song_14[] = "Star Trek:d=4,o=5,b=63:8f.,16a#,d#.6,8d6,16a#.,16g.,16c.6,f6";
PROGMEM prog_int16_t song_14[] = { 698, 714, 932, 238, 1245, 1428, 1175, 476, 932, 357, 784, 357, 1047, 357, 1397, 952, -1 };
//PROGMEM prog_char song_15[] = "MacGyver:d=8,o=6,b=150:c,c,c,c,c,c,2b5,16p,f#5,a5,p,2g5,p,c,c,p,4b5,a5,b5,a5,g5,p,4e,2a5,16p,c,c,p,2b5,p,f#5,a5,p,2g5,p,c,c,p,4b5,a5,b5,a5,g5,p,4e,2a5,2b5,32p,c,b5,a5,4c,b5,a5,d,c,b5,4d,c,b5,4e,d,e,4f#,4b5,4g,p,4f#,4f,4b5,g,e,b5,f#,d,a5,e,c,g5,d,b5,g5,c,e5,b5,d5,c,b5,a5,g5,4a#5,4a5,g,g5,d,g5,d#,d#5,a#5,a5,g5,g4,d5,g4,d#5,g4,a#4,a4,g4,g4,g4,g4,g4,g4,g4";
//Length: 693
PROGMEM prog_int16_t song_15[] = { 1047, 200, 1047, 200, 1047, 200, 1047, 200, 1047, 200, 1047, 200, 988, 800, 0, 100, 740, 200, 880, 200, 0, 200, 784, 800, 0, 200, 1047, 200, 1047, 200, 0, 200, 988, 400, 880, 200, 988, 200, 880, 200, 784, 200, 0, 200, 1319, 400, 880, 800, 0, 100, 1047, 200, 1047, 200, 0, 200, 988, 800, 0, 200, 740, 200, 880, 200, 0, 200, 784, 800, 0, 200, 1047, 200, 1047, 200, 0, 200, 988, 400, 880, 200, 988, 200, 880, 200, 784, 200, 0, 200, 1319, 400, 880, 800, 988, 800, 0, 50, 1047, 200, 988, 200, 880, 200, 1047, 400, 988, 200, 880, 200, 1175, 200, 1047, 200, 988, 200, 1175, 400, 1047, 200, 988, 200, 1319, 400, 1175, 200, 1319, 200, 1480, 400, 988, 400, 1568, 400, 0, 200, 1480, 400, 1397, 400, 988, 400, 1568, 200, 1319, 200, 988, 200, 1480, 200, 1175, 200, 880, 200, 1319, 200, 1047, 200, 784, 200, 1175, 200, 988, 200, 784, 200, 1047, 200, 659, 200, 988, 200, 587, 200, 1047, 200, 988, 200, 880, 200, 784, 200, 932, 400, 880, 400, 1568, 200, 784, 200, 1175, 200, 784, 200, 1245, 200, 622, 200, 932, 200, 880, 200, 784, 200, 392, 200, 587, 200, 392, 200, 622, 200, 392, 200, 466, 200, 440, 200, 392, 200, 392, 200, 392, 200, 392, 200, 392, 200, 392, 200, 392, 200, -1 };


int notes[] = {
    0,
    NOTE_C4, NOTE_CS4, NOTE_D4, NOTE_DS4, NOTE_E4, NOTE_F4, NOTE_FS4, NOTE_G4, NOTE_GS4, NOTE_A4, NOTE_AS4, NOTE_B4,
    NOTE_C5, NOTE_CS5, NOTE_D5, NOTE_DS5, NOTE_E5, NOTE_F5, NOTE_FS5, NOTE_G5, NOTE_GS5, NOTE_A5, NOTE_AS5, NOTE_B5,
    NOTE_C6, NOTE_CS6, NOTE_D6, NOTE_DS6, NOTE_E6, NOTE_F6, NOTE_FS6, NOTE_G6, NOTE_GS6, NOTE_A6, NOTE_AS6, NOTE_B6,
    NOTE_C7, NOTE_CS7, NOTE_D7, NOTE_DS7, NOTE_E7, NOTE_F7, NOTE_FS7, NOTE_G7, NOTE_GS7, NOTE_A7, NOTE_AS7, NOTE_B7
};

void play_song( prog_int16_t *song ) {

    int note, duration;

    int i = 0;


    note = pgm_read_word_near( song + i );
    // iterate over the notes of the songs:
    while( note != -1 && digitalRead( cut_btn ) == LOW ) {
        /*
        Serial.print( "Note: " );
        Serial.println( note );
        */
        duration = pgm_read_word_near( song + i + 1 );
        /*
        Serial.print( "Duration: " );
        Serial.println( duration );
        */
        if( tone ) {
            tone( spkr, note );
        } else {
            //tone( spkr, note ); 
            noTone( spkr );
        }

        i+=2;
        note = pgm_read_word_near( song + i );

        delay( duration );

    }
    noTone( spkr );
}



// the setup routine runs once when you press reset:
void setup()
{
    //Serial.begin( 9600 );
    // initialize the digital pin as an output.
    //pinMode(led, OUTPUT);
    pinMode( spkr, OUTPUT );
    pinMode( btn, INPUT );
    pinMode( cut_btn, INPUT );
    key = 14;
}


#define isdigit(n) (n >= '0' && n <= '9')


// the loop routine runs over and over again forever:
void loop()
{
    short note, duration;
    btn_state_t state = NOT_PRESSED;
    int debounce_count = 0;

    while( digitalRead( btn ) == HIGH ) {}
    while( digitalRead( btn ) == LOW ) {}

    state = PRESSED;

    while( digitalRead( btn ) == HIGH ) {
        if( debounce_count > 10 ) {
            state = FULLY_ON;            
            break;
        }
        delayMicroseconds( 1 );
        debounce_count++;
    }
    
    if( state != FULLY_ON ) {
        return;
    }

    switch( key ) {
    case 0:
        play_song( song_0 );
        break;
    case 1:
        play_song( song_1 );
        break;
    case 2:
        play_song( song_2 );
        break;
    case 3:
        play_song( song_3 );
        break;
    case 4:
        play_song( song_4 );
        break;
    case 5:
        play_song( song_5 );
        break;
    case 6:
        play_song( song_6 );
        break;
    case 7:
        play_song( song_7 );
        break;
    case 8:
        play_song( song_8 );
        break;
    case 9:
        play_song( song_9 );
        break;
    case 10:
        play_song( song_10 );
        break;
    case 11:
        play_song( song_11 );
        break;
    case 12:
        play_song( song_12 );
        break;
    case 13:
        play_song( song_13 );
        break;
    case 14:
        play_song( song_14 );
        break;
    case 15:
        play_song( song_15 );
        break;
    }

 
    if( key == 15 ) {
        key = 0;
    } else {
        key++;
    }



}


